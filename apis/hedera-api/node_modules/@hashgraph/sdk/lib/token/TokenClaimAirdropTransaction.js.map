{"version":3,"file":"TokenClaimAirdropTransaction.js","sources":["../../src/token/TokenClaimAirdropTransaction.js"],"sourcesContent":["// SPDX-License-Identifier: Apache-2.0\nimport PendingAirdropId from \"../token/PendingAirdropId.js\";\nimport AirdropPendingTransaction from \"./AirdropPendingTransaction.js\";\nimport Transaction, {\n    TRANSACTION_REGISTRY,\n} from \"../transaction/Transaction.js\";\n\n/**\n * @typedef {import(\"@hashgraph/proto\").proto.ITransaction} HieroProto.proto.ITransaction\n * @typedef {import(\"@hashgraph/proto\").proto.ITransactionResponse} HieroProto.proto.ITransactionResponse\n * @typedef {import(\"@hashgraph/proto\").proto.TransactionBody} HieroProto.proto.TransactionBody\n * @typedef {import(\"@hashgraph/proto\").proto.ISignedTransaction} HieroProto.proto.ISignedTransaction\n * @typedef {import(\"@hashgraph/proto\").proto.ITransactionBody} HieroProto.proto.ITransactionBody\n * @typedef {import(\"@hashgraph/proto\").proto.ITokenClaimAirdropTransactionBody} HieroProto.proto.ITokenClaimAirdropTransactionBody\n */\n\n/**\n * @typedef {import(\"../channel/Channel.js\").default} Channel\n * @typedef {import(\"../transaction/TransactionId.js\").default} TransactionId\n * @typedef {import(\"../account/AccountId.js\").default} AccountId\n */\n\n/**\n * A transaction that allows an account to claim tokens from a pending airdrop.\n * This transaction is used to finalize the receipt of tokens that were distributed\n * through an airdrop mechanism but require explicit claiming by the recipient.\n */\nexport default class TokenClaimAirdropTransaction extends AirdropPendingTransaction {\n    /**\n     * @param {object} props\n     * @param {PendingAirdropId[]} [props.pendingAirdropIds]\n     */\n    constructor(props = {}) {\n        super(props);\n    }\n\n    /**\n     * @override\n     * @internal\n     * @param {Channel} channel\n     * @param {HieroProto.proto.ITransaction} request\n     * @returns {Promise<HieroProto.proto.ITransactionResponse>}\n     */\n    _execute(channel, request) {\n        return channel.token.claimAirdrop(request);\n    }\n\n    /**\n     * @override\n     * @internal\n     * @returns {HieroProto.proto.ITokenClaimAirdropTransactionBody}\n     */\n    _makeTransactionData() {\n        return {\n            pendingAirdrops: this.pendingAirdropIds.map((pendingAirdropId) =>\n                pendingAirdropId.toBytes(),\n            ),\n        };\n    }\n\n    /**\n     * @internal\n     * @param {HieroProto.proto.ITransaction[]} transactions\n     * @param {HieroProto.proto.ISignedTransaction[]} signedTransactions\n     * @param {TransactionId[]} transactionIds\n     * @param {AccountId[]} nodeIds\n     * @param {HieroProto.proto.ITransactionBody[]} bodies\n     * @returns {TokenClaimAirdropTransaction}\n     */\n    static _fromProtobuf(\n        transactions,\n        signedTransactions,\n        transactionIds,\n        nodeIds,\n        bodies,\n    ) {\n        const body = bodies[0];\n        const { pendingAirdrops } =\n            /** @type {HieroProto.proto.ITokenClaimAirdropTransactionBody} */ (\n                body.tokenClaimAirdrop\n            );\n\n        return Transaction._fromProtobufTransactions(\n            new TokenClaimAirdropTransaction({\n                pendingAirdropIds: pendingAirdrops?.map((pendingAirdrop) => {\n                    return PendingAirdropId.fromBytes(pendingAirdrop);\n                }),\n            }),\n            transactions,\n            signedTransactions,\n            transactionIds,\n            nodeIds,\n            bodies,\n        );\n    }\n\n    /**\n     * @override\n     * @protected\n     * @returns {NonNullable<HieroProto.proto.TransactionBody[\"data\"]>}\n     */\n    _getTransactionDataCase() {\n        return \"tokenClaimAirdrop\";\n    }\n\n    /**\n     * @returns {string}\n     */\n    _getLogId() {\n        const timestamp = /** @type {import(\"../Timestamp.js\").default} */ (\n            this._transactionIds.current.validStart\n        );\n        return `TokenClaimAirdropTransaction:${timestamp.toString()}`;\n    }\n}\n\nTRANSACTION_REGISTRY.set(\n    \"tokenClaimAirdrop\",\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    TokenClaimAirdropTransaction._fromProtobuf,\n);\n"],"names":["TokenClaimAirdropTransaction","AirdropPendingTransaction","constructor","props","super","_execute","channel","request","token","claimAirdrop","_makeTransactionData","pendingAirdrops","this","pendingAirdropIds","map","pendingAirdropId","toBytes","_fromProtobuf","transactions","signedTransactions","transactionIds","nodeIds","bodies","body","Transaction","_fromProtobufTransactions","pendingAirdrop","PendingAirdropId","fromBytes","_getTransactionDataCase","_getLogId","_transactionIds","current","toString","TRANSACTION_REGISTRY","set"],"mappings":"2JA2Be,MAAMA,UAAqCC,EAKtD,WAAAC,CAAYC,EAAQ,IAChBC,MAAMD,EACd,CASI,QAAAE,CAASC,EAASC,GACd,OAAOD,EAAQE,MAAMC,aAAaF,EAC1C,CAOI,oBAAAG,GACI,MAAO,CACHC,gBAAiBC,KAAKC,kBAAkBC,IAAKC,GACzCA,EAAiBC,WAGjC,CAWI,oBAAOC,CACHC,EACAC,EACAC,EACAC,EACAC,GAEA,MAAMC,EAAOD,EAAO,IACdX,gBAAEA,GAEAY,EACH,kBAEL,OAAOC,EAAYC,0BACf,IAAIzB,EAA6B,CAC7Ba,kBAAmBF,GAAiBG,IAAKY,GAC9BC,EAAiBC,UAAUF,MAG1CR,EACAC,EACAC,EACAC,EACAC,EAEZ,CAOI,uBAAAO,GACI,MAAO,mBACf,CAKI,SAAAC,GAII,MAAO,gCAFHlB,KAAKmB,gBAAgBC,QACxB,WACgDC,YACzD,EAGAC,EAAqBC,IACjB,oBAEAnC,EAA6BiB"}