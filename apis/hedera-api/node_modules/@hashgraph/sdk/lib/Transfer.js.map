{"version":3,"file":"Transfer.js","sources":["../src/Transfer.js"],"sourcesContent":["// SPDX-License-Identifier: Apache-2.0\n\nimport AccountId from \"./account/AccountId.js\";\nimport Hbar from \"./Hbar.js\";\n\n/**\n * @typedef {object} TransferJSON\n * @property {string} accountId\n * @property {string} amount\n * @property {boolean} isApproved\n */\n\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").proto.IAccountAmount} HieroProto.proto.IAccountAmount\n * @typedef {import(\"@hashgraph/proto\").proto.IAccountID} HieroProto.proto.IAccountID\n */\n\n/**\n * @typedef {import(\"bignumber.js\").default} BigNumber\n * @typedef {import(\"long\")} Long\n */\n\n/**\n * An account, and the amount that it sends or receives during a cryptocurrency transfer.\n */\nexport default class Transfer {\n    /**\n     * @internal\n     * @param {object} props\n     * @param {AccountId | string} props.accountId\n     * @param {number | string | Long | BigNumber | Hbar} props.amount\n     * @param {boolean} props.isApproved\n     */\n    constructor(props) {\n        /**\n         * The Account ID that sends or receives cryptocurrency.\n         *\n         * @readonly\n         */\n        this.accountId =\n            props.accountId instanceof AccountId\n                ? props.accountId\n                : AccountId.fromString(props.accountId);\n\n        /**\n         * The amount of tinybars that the account sends(negative) or receives(positive).\n         */\n        this.amount =\n            props.amount instanceof Hbar\n                ? props.amount\n                : new Hbar(props.amount);\n\n        this.isApproved = props.isApproved;\n    }\n\n    /**\n     * @internal\n     * @param {HieroProto.proto.IAccountAmount[]} accountAmounts\n     * @returns {Transfer[]}\n     */\n    static _fromProtobuf(accountAmounts) {\n        const transfers = [];\n\n        for (const transfer of accountAmounts) {\n            transfers.push(\n                new Transfer({\n                    accountId: AccountId._fromProtobuf(\n                        /** @type {HieroProto.proto.IAccountID} */ (\n                            transfer.accountID\n                        ),\n                    ),\n                    amount: Hbar.fromTinybars(\n                        transfer.amount != null ? transfer.amount : 0,\n                    ),\n                    isApproved: /** @type {boolean} */ (transfer.isApproval),\n                }),\n            );\n        }\n\n        return transfers;\n    }\n\n    /**\n     * @internal\n     * @returns {HieroProto.proto.IAccountAmount}\n     */\n    _toProtobuf() {\n        return {\n            accountID: this.accountId._toProtobuf(),\n            amount: this.amount.toTinybars(),\n            isApproval: this.isApproved,\n        };\n    }\n\n    /**\n     * @returns {TransferJSON}\n     */\n    toJSON() {\n        return {\n            accountId: this.accountId.toString(),\n            amount: this.amount.toTinybars().toString(),\n            isApproved: this.isApproved,\n        };\n    }\n\n    /**\n     * @returns {string}\n     */\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n}\n"],"names":["Transfer","constructor","props","this","accountId","AccountId","fromString","amount","Hbar","isApproved","_fromProtobuf","accountAmounts","transfers","transfer","push","fromTinybars","_toProtobuf","accountID","toTinybars","isApproval","toJSON","toString","JSON","stringify"],"mappings":"+DA0Be,MAAMA,EAQjB,WAAAC,CAAYC,GAMRC,KAAKC,UACDF,EAAME,qBAAqBC,EACrBH,EAAME,UACNC,EAAUC,WAAWJ,EAAME,WAKrCD,KAAKI,OACDL,EAAMK,kBAAkBC,EAClBN,EAAMK,OACN,IAAIC,EAAKN,EAAMK,QAEzBJ,KAAKM,WAAaP,EAAMO,UAChC,CAOI,oBAAOC,CAAcC,GACjB,MAAMC,EAAY,GAElB,IAAK,MAAMC,KAAYF,EACnBC,EAAUE,KACN,IAAId,EAAS,CACTI,UAAWC,EAAUK,cAEbG,EAC5B,WAEoBN,OAAQC,EAAKO,aACU,MAAnBF,EAASN,OAAiBM,EAASN,OAAS,GAEhDE,WAAoCI,EAAmB,cAKnE,OAAOD,CACf,CAMI,WAAAI,GACI,MAAO,CACHC,UAAWd,KAAKC,UAAUY,cAC1BT,OAAQJ,KAAKI,OAAOW,aACpBC,WAAYhB,KAAKM,WAE7B,CAKI,MAAAW,GACI,MAAO,CACHhB,UAAWD,KAAKC,UAAUiB,WAC1Bd,OAAQJ,KAAKI,OAAOW,aAAaG,WACjCZ,WAAYN,KAAKM,WAE7B,CAKI,QAAAY,GACI,OAAOC,KAAKC,UAAUpB,KAAKiB,SACnC"}