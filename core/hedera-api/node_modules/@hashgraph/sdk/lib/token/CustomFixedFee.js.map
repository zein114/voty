{"version":3,"file":"CustomFixedFee.js","sources":["../../src/token/CustomFixedFee.js"],"sourcesContent":["// SPDX-License-Identifier: Apache-2.0\n\nimport TokenId from \"./TokenId.js\";\nimport CustomFee from \"./CustomFee.js\";\nimport AccountId from \"../account/AccountId.js\";\nimport Hbar from \"../Hbar.js\";\nimport { convertAmountToLong } from \"../util.js\";\n\n/**\n * @typedef {import(\"bignumber.js\").default} BigNumber\n */\n\n/**\n * @namespace proto\n * @typedef {import(\"@hashgraph/proto\").proto.ICustomFee} HieroProto.proto.ICustomFee\n * @typedef {import(\"@hashgraph/proto\").proto.IFixedFee} HieroProto.proto.IFixedFee\n * @typedef {import(\"@hashgraph/proto\").proto.IFixedCustomFee} HieroProto.proto.IFixedCustomFee\n */\n\nexport default class CustomFixedFee extends CustomFee {\n    /**\n     * @param {object} props\n     * @param {AccountId | string} [props.feeCollectorAccountId]\n     * @param {boolean} [props.allCollectorsAreExempt]\n     * @param {TokenId | string} [props.denominatingTokenId]\n     * @param {Long | number | BigNumber | bigint} [props.amount]\n     */\n    constructor(props = {}) {\n        super(props);\n\n        /**\n         * @type {?TokenId}\n         */\n        this._denominatingTokenId = null;\n\n        if (props.denominatingTokenId != null) {\n            this.setDenominatingTokenId(props.denominatingTokenId);\n        }\n\n        /**\n         * @type {?Long}\n         */\n        this._amount = null;\n\n        if (props.amount != null) {\n            this.setAmount(props.amount);\n        }\n    }\n\n    /**\n     * @param {Hbar} amount\n     * @returns {CustomFixedFee}\n     */\n    setHbarAmount(amount) {\n        this._amount = amount.toTinybars();\n        this._denominatingTokenId = null;\n        return this;\n    }\n\n    /**\n     * @returns {TokenId | Hbar | null}\n     */\n    get hbarAmount() {\n        return this._denominatingTokenId != null\n            ? null\n            : Hbar.fromTinybars(this._amount != null ? this._amount : 0);\n    }\n\n    /**\n     * @returns {CustomFixedFee}\n     */\n    setDenominatingTokenToSameToken() {\n        this._denominatingTokenId = new TokenId(0, 0, 0);\n        return this;\n    }\n\n    /**\n     * @returns {?TokenId}\n     */\n    get denominatingTokenId() {\n        return this._denominatingTokenId;\n    }\n\n    /**\n     * @param {TokenId | string} denominatingTokenId\n     * @returns {CustomFixedFee}\n     */\n    setDenominatingTokenId(denominatingTokenId) {\n        this._denominatingTokenId =\n            typeof denominatingTokenId === \"string\"\n                ? TokenId.fromString(denominatingTokenId)\n                : denominatingTokenId;\n        return this;\n    }\n\n    /**\n     * @returns {?Long}\n     */\n    get amount() {\n        return this._amount;\n    }\n\n    /**\n     * @param {Long | number | BigNumber | bigint} amount\n     * @returns {CustomFixedFee}\n     */\n    setAmount(amount) {\n        this._amount = convertAmountToLong(amount);\n        return this;\n    }\n\n    /**\n     * @internal\n     * @override\n     * @param {HieroProto.proto.ICustomFee} info\n     * @returns {CustomFixedFee}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static _fromProtobuf(info) {\n        const fee = /** @type {HieroProto.proto.IFixedFee} */ (info.fixedFee);\n\n        return new CustomFixedFee({\n            feeCollectorAccountId:\n                info.feeCollectorAccountId != null\n                    ? AccountId._fromProtobuf(info.feeCollectorAccountId)\n                    : undefined,\n            allCollectorsAreExempt:\n                info.allCollectorsAreExempt != null\n                    ? info.allCollectorsAreExempt\n                    : undefined,\n            denominatingTokenId:\n                fee.denominatingTokenId != null\n                    ? TokenId._fromProtobuf(fee.denominatingTokenId)\n                    : undefined,\n            amount: fee.amount != null ? fee.amount : undefined,\n        });\n    }\n\n    /**\n     * @internal\n     * @abstract\n     * @returns {HieroProto.proto.ICustomFee}\n     */\n    _toProtobuf() {\n        return {\n            feeCollectorAccountId:\n                this.feeCollectorAccountId != null\n                    ? this.feeCollectorAccountId._toProtobuf()\n                    : null,\n            allCollectorsAreExempt: this.allCollectorsAreExempt,\n            fixedFee: {\n                denominatingTokenId:\n                    this._denominatingTokenId != null\n                        ? this._denominatingTokenId._toProtobuf()\n                        : null,\n                amount: this._amount,\n            },\n        };\n    }\n\n    /**\n     * @internal\n     * @abstract\n     * @returns {HieroProto.proto.IFixedCustomFee}\n     */\n    _toTopicFeeProtobuf() {\n        return {\n            feeCollectorAccountId:\n                this.feeCollectorAccountId != null\n                    ? this.feeCollectorAccountId._toProtobuf()\n                    : null,\n            fixedFee: {\n                denominatingTokenId:\n                    this._denominatingTokenId != null\n                        ? this._denominatingTokenId._toProtobuf()\n                        : null,\n                amount: this._amount,\n            },\n        };\n    }\n}\n"],"names":["CustomFixedFee","CustomFee","constructor","props","super","this","_denominatingTokenId","denominatingTokenId","setDenominatingTokenId","_amount","amount","setAmount","setHbarAmount","toTinybars","hbarAmount","Hbar","fromTinybars","setDenominatingTokenToSameToken","TokenId","fromString","convertAmountToLong","_fromProtobuf","info","fee","feeCollectorAccountId","AccountId","undefined","allCollectorsAreExempt","_toProtobuf","fixedFee","_toTopicFeeProtobuf"],"mappings":"4KAmBe,MAAMA,UAAuBC,EAQxC,WAAAC,CAAYC,EAAQ,IAChBC,MAAMD,GAKNE,KAAKC,qBAAuB,KAEK,MAA7BH,EAAMI,qBACNF,KAAKG,uBAAuBL,EAAMI,qBAMtCF,KAAKI,QAAU,KAEK,MAAhBN,EAAMO,QACNL,KAAKM,UAAUR,EAAMO,OAEjC,CAMI,aAAAE,CAAcF,GAGV,OAFAL,KAAKI,QAAUC,EAAOG,aACtBR,KAAKC,qBAAuB,KACrBD,IACf,CAKI,cAAIS,GACA,OAAoC,MAA7BT,KAAKC,qBACN,KACAS,EAAKC,aAA6B,MAAhBX,KAAKI,QAAkBJ,KAAKI,QAAU,EACtE,CAKI,+BAAAQ,GAEI,OADAZ,KAAKC,qBAAuB,IAAIY,EAAQ,EAAG,EAAG,GACvCb,IACf,CAKI,uBAAIE,GACA,OAAOF,KAAKC,oBACpB,CAMI,sBAAAE,CAAuBD,GAKnB,OAJAF,KAAKC,qBAC8B,iBAAxBC,EACDW,EAAQC,WAAWZ,GACnBA,EACHF,IACf,CAKI,UAAIK,GACA,OAAOL,KAAKI,OACpB,CAMI,SAAAE,CAAUD,GAEN,OADAL,KAAKI,QAAUW,EAAoBV,GAC5BL,IACf,CASI,oBAAOgB,CAAcC,GACjB,MAAMC,EAAiDD,EAAa,SAEpE,OAAO,IAAItB,EAAe,CACtBwB,sBACkC,MAA9BF,EAAKE,sBACCC,EAAUJ,cAAcC,EAAKE,4BAC7BE,EACVC,uBACmC,MAA/BL,EAAKK,uBACCL,EAAKK,4BACLD,EACVnB,oBAC+B,MAA3BgB,EAAIhB,oBACEW,EAAQG,cAAcE,EAAIhB,0BAC1BmB,EACVhB,OAAsB,MAAda,EAAIb,OAAiBa,EAAIb,YAASgB,GAEtD,CAOI,WAAAE,GACI,MAAO,CACHJ,sBACkC,MAA9BnB,KAAKmB,sBACCnB,KAAKmB,sBAAsBI,cAC3B,KACVD,uBAAwBtB,KAAKsB,uBAC7BE,SAAU,CACNtB,oBACiC,MAA7BF,KAAKC,qBACCD,KAAKC,qBAAqBsB,cAC1B,KACVlB,OAAQL,KAAKI,SAG7B,CAOI,mBAAAqB,GACI,MAAO,CACHN,sBACkC,MAA9BnB,KAAKmB,sBACCnB,KAAKmB,sBAAsBI,cAC3B,KACVC,SAAU,CACNtB,oBACiC,MAA7BF,KAAKC,qBACCD,KAAKC,qBAAqBsB,cAC1B,KACVlB,OAAQL,KAAKI,SAG7B"}